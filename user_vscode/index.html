<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <script src="/libs/lunr/lunr.min.js"></script> <script src="/libs/lunr/lunr_index.js"></script> <script src="/libs/lunr/lunrclient.min.js"></script> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/poole_hyde.css"> <link rel=stylesheet  href="/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 1%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/assets/favicon.png"> <title>Visual Studio Code on HPC Clusters</title> <style> .content {max-width: 60rem} </style> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <br> <h1><a href="/">Julia On HPC Clusters</a></h1> <div style="line-height:18px; font-size: 15px; opacity: 0.85">by the Julia HPC community</div> </div> <br> <style> </style> <nav class=sidebar-nav  style="opacity: 0.9; margin-bottom: 1.2cm;"> <a class="sidebar-nav-item " href="/"><b>Welcome</b></a> <br> <div class=course-section >For Users</div> <a class="sidebar-nav-item " href="/user_gettingstarted/">Getting started</a> <a class="sidebar-nav-item active" href="/user_vscode/">Visual Studio Code on HPC Clusters</a> <a class="sidebar-nav-item " href="/user_hpcprofiling/">HPC profiling tools</a> <a class="sidebar-nav-item " href="/user_hpcsystems/">HPC systems with Julia support</a> <a class="sidebar-nav-item " href="/user_faq/">FAQ</a> <div class=course-section >For System Admins</div> <a class="sidebar-nav-item " href="/sysadmin_julia/">How to provide Julia to users?</a> </nav> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder="Enter search term" type=text > <input type=submit  value=Search  formaction="/search/index.html"> </form> <br> <br> </div> </div> <div class="content container"> <div class=franklin-content > <h1 id=visual_studio_code_on_hpc_clusters ><a href="#visual_studio_code_on_hpc_clusters" class=header-anchor >Visual Studio Code on HPC Clusters</a></h1> <p>VS Code is a very popular IDE with a great <a href="https://marketplace.visualstudio.com/items?itemName&#61;julialang.language-julia">Julia extension</a> &#40;<a href="https://www.julia-vscode.org/">website</a>&#41;. Running it on a cluster typically isn&#39;t straightforward and we want to highlight the most important steps here.</p> <hr /> <p><a id=content  class=anchor ></a> <strong>Content</strong></p> <div class=franklin-toc ><ol><li><a href="#what_does_running_vs_code_on_a_cluster_actually_mean">What does &quot;Running VS Code on a cluster&quot; actually mean?</a><li><a href="#running_vs_code_on_a_login_node_ssh">Running VS Code on a login node &#40;SSH&#41;</a><li><a href="#installing_the_julia_extension">Installing the Julia extension</a><li><a href="#making_the_julia_extension_work">Making the Julia extension work</a><li><a href="#can_i_run_vs_code_on_a_compute_node_ssh">Can I run VS Code on a compute node? &#40;SSH&#41;</a><li><a href="#running_vs_code_remotely_via_remote_tunnels">Running VS Code remotely via &quot;remote tunnels&quot;</a></ol></div> <hr /> <h2 id=what_does_running_vs_code_on_a_cluster_actually_mean ><a href="#what_does_running_vs_code_on_a_cluster_actually_mean" class=header-anchor >What does &quot;Running VS Code on a cluster&quot; actually mean?</a></h2> <p>To be clear: What it <strong>does not</strong> mean is to have VS Code running locally and using its terminal &#40;at the bottom&#41; the <code>ssh</code> to the cluster and running <code>julia</code> on it.</p> <p>Instead, we want to connect VS Code to a little server component that will run on the cluster. Hence, only the GUI will run locally and everything else will run on the cluster. This includes VS Code extensions, like the Julia extension and will eventually give us an integrated REPL, a debugger, a plot pane, etc., all working remotely on the cluster.</p> <h2 id=running_vs_code_on_a_login_node_ssh ><a href="#running_vs_code_on_a_login_node_ssh" class=header-anchor >Running VS Code on a login node &#40;SSH&#41;</a></h2> <p><strong>Note:</strong> We assume that the hostname of the cluster is <code>mycluster</code>.</p> <ol> <li><p>Make sure that you have password-less SSH access to the cluster &#40;<code>ssh mycluster</code> should bring you to the cluster&#41;.</p> <li><p>In VS Code, press <code>F1</code> and run the <code>Remote-SSH: Open SSH Host...</code> command.</p> <ul> <li><p>If the command isn&#39;t available, make sure that <a href="https://marketplace.visualstudio.com/items?itemName&#61;ms-vscode-remote.remote-ssh">Remote - SSH extension</a> is installed.</p> </ul> <li><p>Enter <code>mycluster</code> and press enter.</p> </ol> <p>After a second or two, you should have VS Code running on a login node&#33; ðŸŽ‰</p> <p><a href="#content">â¤´ <em><strong>back to Content</strong></em></a></p> <h2 id=installing_the_julia_extension ><a href="#installing_the_julia_extension" class=header-anchor >Installing the Julia extension</a></h2> <ol> <li><p>Open the extensions view &#40;press <code>CTRL/CMD &#43; SHIFT &#43; X</code>&#41;.</p> <li><p>Search for <code>julia</code>.</p> <li><p>Click on <code>install</code>.</p> </ol> <h2 id=making_the_julia_extension_work ><a href="#making_the_julia_extension_work" class=header-anchor >Making the Julia extension work</a></h2> <p>Typically, the <code>julia</code> command is not directly available on a cluster but one must load a Julia module first &#40;e.g. <code>module load julia</code>&#41;. Unfortunately, the Julia extension doesn&#39;t know about this, so we need to teach it.</p> <ol> <li><p>Prepare a Julia wrapper script &#40;<code>julia_wrapper.sh</code>&#41; like the following:</p> </ol> <pre><code class="bash hljs"><span class=hljs-meta >#!/bin/bash</span>

<span class=hljs-comment ># Making module command available</span>
<span class=hljs-comment ># ------------------------------------------------------------</span>
<span class=hljs-built_in >export</span> MODULEPATH=/etc/modulefiles:/usr/share/modulefiles
<span class=hljs-built_in >export</span> LMOD_SYSTEM_DEFAULT_MODULES=<span class=hljs-string >&quot;DefaultModules&quot;</span>
<span class=hljs-built_in >source</span> /usr/share/lmod/lmod/init/profile
module --initial_load restore
<span class=hljs-comment ># ------------------------------------------------------------</span>

<span class=hljs-comment ># Load julia</span>
module load julia

<span class=hljs-comment ># Pass on all arguments to julia</span>
<span class=hljs-built_in >exec</span> julia <span class=hljs-string >&quot;<span class=hljs-variable >${@}</span>&quot;</span></code></pre> <p>Note the module name as well as &#40;at least&#41; the first two lines of the block that makes the <code>module</code> command available are system specific and must be adjusted. To figure our the latter, you may run the following in a shell on the cluster: <code>echo &#36;MODULEPATH</code> and <code>echo &#36;LMOD_SYSTEM_DEFAULT_MODULES</code>.</p> <ol start=2 > <li><p>Make the wrapper script executable: <code>chmod &#43;x julia_wrapper.sh</code></p> <li><p>Check that it works: <code>./julia_wrapper.sh</code> should open the Julia REPL.</p> </ol> <p>Once the wrapper is ready and functional, we need to point the Julia extension to it.</p> <ol start=4 > <li><p>Open the VS Code Settings &#40;press <code>CTRL/CMD &#43; ,</code>&#41;.</p> <li><p>Click on the tab <code>Remote &#91;SSH: mycluster&#93;</code>.</p> <li><p>Search for <code>Julia executable</code>.</p> <li><p>Insert <code>/path/to/julia_wrapper.sh</code> into the text field under <code>Julia: Executable Path</code>.</p> </ol> <p>If <code>ALT/OPTION &#43; J</code> followed by <code>ALT/OPTION &#43; O</code> &#40;<strong>or</strong> pressing <code>F1</code> and executing the <code>Julia: Start REPL</code> command&#41; successfully spins up the integrated Julia REPL, you know that the setup is working&#33; ðŸŽ‰</p> <p><strong>Important note:</strong> If you want all the nice features of the Julia extension - like inline evaluation, plotting, debugging, etc. - you need to use the <strong>integrated REPL</strong> started by the shortcuts mentioned above. If you just type <code>julia</code> in a terminal &#40;at the bottom&#41;, the resulting REPL will <strong>not</strong> be connected to the extension&#33; </p> <p><a href="#content">â¤´ <em><strong>back to Content</strong></em></a></p> <h2 id=can_i_run_vs_code_on_a_compute_node_ssh ><a href="#can_i_run_vs_code_on_a_compute_node_ssh" class=header-anchor >Can I run VS Code on a compute node? &#40;SSH&#41;</a></h2> <p>Maybe. The first thing you need to check is whether it is at all possible for you to connect to a compute node via SSH, as not all HPC centers allow this. &#40;Note that typically you can only <code>ssh</code> to compute nodes that are part of a job that you have currently running.&#41;</p> <p>Given that you can <code>ssh</code> to compute nodes, what you want to do next is add a generic &#40;wildcard&#41; entry, that covers all compute nodes, to your <code>.ssh/config</code>. Assuming that the hostnames of the compute nodes start with <code>cn</code> &#40;e.g. <code>cn1201</code> and <code>cn2134</code> etc.&#41; and assuming that you already have a ssh config entry for <code>mycluster</code>, this could look like this:</p> <pre><code class="julia hljs">Host cn*
    HostName %h
    ProxyJump mycluster
    User [USERNAME]
    IdentityFile [PATH TO PRIVATE KEY]
    IdentitiesOnly yes</code></pre> <p>Afterwards, you can use the following steps to run VS Code on a compute node:</p> <ol> <li><p>Open a terminal &#40;outside of VS Code&#41;</p> <li><p>Login to the cluster &#40;<code>ssh mycluster</code>&#41;</p> <li><p>Get an interactive session on a compute node &#40;and write down the name of the node that has been assigend to you, say, <code>cn1201</code>&#41;.</p> <li><p>Follow the steps under <a href="#running-vs-code-on-a-login-node-ssh">Running VS Code on a login node &#40;SSH&#41;</a> above but replace the hostname <code>mycluster</code> by the name of the compute node &#40;e.g. <code>cn1201</code>&#41;.</p> </ol> <p><a href="#content">â¤´ <em><strong>back to Content</strong></em></a></p> <h2 id=running_vs_code_remotely_via_remote_tunnels ><a href="#running_vs_code_remotely_via_remote_tunnels" class=header-anchor >Running VS Code remotely via &quot;remote tunnels&quot;</a></h2> <p>Microsoft provides <a href="https://code.visualstudio.com/docs/remote/tunnels">&quot;Remote tunnels&quot;</a> as an alternative to SSH to connect VS Code to remote systems.</p> <p><strong>Pro</strong></p> <ul> <li><p>Allows you to connect to any machine with internet access &#40;including cluster compute nodes that you can&#39;t ssh to&#33;&#41;.</p> </ul> <p><strong>Con</strong></p> <ul> <li><p>Requires a GitHub / Microsoft account.</p> <li><p>Microsoft serves as the tunnel provider &#40;man in the middle&#41;.</p> </ul> <ol> <li><p>Download the VS Code command line interface from <a href="https://code.visualstudio.com/Download">https://code.visualstudio.com/Download</a> &#40;search for <strong>CLI</strong>&#41;.</p> <li><p>Copy the single <code>code</code> binary to the cluster &#40;and put the directory on <code>PATH</code>&#41;.</p> <li><p>Run <code>code tunnel --verbose</code> and follow the steps &#40;to connect to your GitHub account&#41;.</p> <li><p>Afterwards, open VS Code and install the <a href="https://marketplace.visualstudio.com/items?itemName&#61;ms-vscode.remote-server">Remote - Tunnels</a> extension.</p> <li><p>Run the command <code>Remote-Tunnels: Connect to Tunnel...</code> and connect to the remote node.</p> </ol> <p><a href="#content">â¤´ <em><strong>back to Content</strong></em></a></p> <div class=page-foot > <div class=copyright > <a href="https://github.com/JuliaHPC/juliahpc.github.io/"><b>Edit this page on <img class=github-logo  src="https://unpkg.com/ionicons@5.1.2/dist/svg/logo-github.svg"></b></a><br> Last modified: July 12, 2024. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div>